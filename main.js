/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => PenModePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  logLevel: "warn",
  isActive: false
};
var PenModePlugin = class extends import_obsidian.Plugin {
  constructor() {
    super(...arguments);
    this.isActive = false;
    this.previousVimModeState = false;
  }
  /**
   * Helper method to get the active editor using obsidian api
   * @returns active editor or null if none exists
   */
  getActiveEditor() {
    const view = this.app.workspace.getActiveViewOfType(import_obsidian.MarkdownView);
    return (view == null ? void 0 : view.editor) || null;
  }
  async onload() {
    await this.loadSettings();
    this.logger = new Logger(this.settings.logLevel);
    this.boundKeydownHandler = this.handleKeydown.bind(this);
    this.statusBarItem = this.addStatusBarItem();
    this.statusBarItem.style.display = "none";
    this.addCommand({
      id: "toggle-pen-mode",
      name: "Toggle Pen Mode",
      callback: () => this.togglePenMode(),
      hotkeys: []
    });
    this.addSettingTab(new PenModeSettingTab(this.app, this));
    if (this.settings.isActive) {
      this.isActive = true;
      this.enablePenMode();
      this.updateStatusBar();
    }
    this.logger.info("Pen mode plugin loaded");
  }
  onunload() {
    if (this.isActive) {
      this.disablePenMode();
    }
    this.logger.info("Pen mode plugin unloaded");
  }
  async loadSettings() {
    this.settings = Object.assign(
      {},
      DEFAULT_SETTINGS,
      await this.loadData()
    );
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  togglePenMode() {
    this.isActive = !this.isActive;
    if (this.isActive) {
      this.enablePenMode();
    } else {
      this.disablePenMode();
    }
    this.settings.isActive = this.isActive;
    this.saveSettings();
    this.updateStatusBar();
    new import_obsidian.Notice(`Pen Mode ${this.isActive ? "enabled" : "disabled"}`);
    this.logger.info(`Pen Mode ${this.isActive ? "enabled" : "disabled"}`);
  }
  /**
   * Read the Obsidian config file
   * @returns Promise with the config object
   */
  async readObsidianConfig() {
    try {
      const configPath = (0, import_obsidian.normalizePath)(
        `${this.app.vault.configDir}/app.json`
      );
      const configData = await this.app.vault.adapter.read(configPath);
      return JSON.parse(configData);
    } catch (error) {
      this.logger.error("Error reading Obsidian config: ", error);
      throw new Error("Failed to read Obsidian config");
    }
  }
  /**
   * Write to the Obsidian config file
   * @param config The config object to write
   */
  async writeObsidianConfig(config) {
    try {
      const configPath = (0, import_obsidian.normalizePath)(
        `${this.app.vault.configDir}/app.json`
      );
      const configData = JSON.stringify(config, null, 2);
      await this.app.vault.adapter.write(configPath, configData);
    } catch (error) {
      this.logger.error("Error writing Obsidian config:", error);
      throw new Error("Failed to write Obsidian config");
    }
  }
  /**
   * Set Vim mode to a specific state
   * @param enableVim Whether to enable or disable Vim mode
   */
  async setVimMode(enableVim) {
    try {
      const config = await this.readObsidianConfig();
      this.previousVimModeState = config.vimMode;
      config.vimMode = enableVim;
      await this.writeObsidianConfig(config);
      this.logger.info(`Vim mode ${enableVim ? "enabled" : "disabled"}`);
    } catch (error) {
      this.logger.error("Error setting up Vim mode:", error);
      new import_obsidian.Notice("Failed to update vim mode settings");
    }
  }
  async enablePenMode() {
    this.statusBarItem.style.display = "block";
    try {
      const config = await this.readObsidianConfig();
      this.previousVimModeState = config.vimMode;
      if (config.vimMode) {
        config.vimMode = false;
        await this.writeObsidianConfig(config);
        this.logger.info("Vim mode disabled for Pen Mode");
      }
    } catch (error) {
      this.logger.error(
        "Error handling Vim mode when enabling Pen Mode:",
        error
      );
      new import_obsidian.Notice("Failed to update Vim mode settings");
    }
    this.addEditorVisualIndicator();
    document.removeEventListener("keydown", this.boundKeydownHandler, true);
    document.addEventListener("keydown", this.boundKeydownHandler, true);
    this.logger.info(
      "Keyboard event handler registered with capture phase"
    );
    this.registerDomEvent(
      document,
      "keydown",
      this.boundKeydownHandler,
      true
    );
  }
  async disablePenMode() {
    this.statusBarItem.style.display = "none";
    this.removeEditorVisualIndicator();
    document.removeEventListener("keydown", this.boundKeydownHandler, true);
    try {
      const config = await this.readObsidianConfig();
      if (config.vimMode !== this.previousVimModeState) {
        config.vimMode = this.previousVimModeState;
        await this.writeObsidianConfig(config);
        this.logger.info(
          `Vim mode restored to ${this.previousVimModeState ? "enabled" : "disabled"}`
        );
      }
    } catch (error) {
      this.logger.error("Error restoring vim mode:", error);
      new import_obsidian.Notice("Failed to restore vim mode settings");
    }
  }
  addEditorVisualIndicator() {
    const editorEl = document.querySelector(".cm-editor");
    if (editorEl) {
      editorEl.classList.add("pen-mode-active");
      const existingStyle = document.getElementById("pen-mode-style");
      if (!existingStyle) {
        const style = document.createElement("style");
        style.id = "pen-mode-style";
        style.textContent = `
					.pen-mode-active {
						border: 2px solid rgba(120, 160, 255, 0.4) !important;
						background-color: rgba(120, 160, 255, 0.05) !important
					}
				`;
        document.head.appendChild(style);
      }
    }
  }
  removeEditorVisualIndicator() {
    document.querySelectorAll(".cm-editor").forEach((el) => {
      el.classList.remove("pen-mode-active");
    });
  }
  updateStatusBar() {
    this.statusBarItem.empty();
    (0, import_obsidian.setIcon)(this.statusBarItem, "pencil");
    this.statusBarItem.createSpan({ text: " Pen Mode" });
  }
  handleKeydown(event) {
    if (!this.isActive)
      return;
    const disabledKeys = [
      "ArrowUp",
      "ArrowDown",
      "ArrowRight",
      "Delete",
      "Backspace",
      "PageUp",
      "PageDown"
    ];
    if (disabledKeys.includes(event.key)) {
      event.preventDefault();
      event.stopPropagation();
      this.logger.debug(`Prevented key: ${event.key}`);
      return;
    }
    if (event.key === "ArrowLeft") {
      event.preventDefault();
      this.strikethroughLastWord();
      this.logger.debug("Strikethrough applied");
    }
  }
  strikethroughLastWord() {
    const editor = this.getActiveEditor();
    if (!editor)
      return;
    try {
      const cursor = editor.getCursor();
      const line = editor.getLine(cursor.line);
      const beforeCursor = line.slice(0, cursor.ch);
      if (this.hasNearbyStrikethroughMarkers(beforeCursor)) {
        this.logger.debug(
          "Word already has strikethrough applied, ignoring"
        );
        return;
      }
      const isAfterWhitespace = beforeCursor.length > 0 && /\s$/.test(beforeCursor);
      if (isAfterWhitespace) {
        this.handleStrikethroughAfterWhitespace(
          editor,
          cursor,
          line,
          beforeCursor
        );
        return;
      }
      this.handleStrikethroughAtCursor(
        editor,
        cursor,
        line,
        beforeCursor
      );
    } catch (error) {
      this.logger.error("Error applying strikethrough: ", error);
      new import_obsidian.Notice("Failed to apply strikethrough");
    }
  }
  /**
   * Check if there are strikethrough markers near the cursor
   */
  hasNearbyStrikethroughMarkers(text) {
    if (text.endsWith("~~"))
      return true;
    if (text.length >= 4 && text.substring(text.length - 4).includes("~~"))
      return true;
    return false;
  }
  /**
   * Handle strikethrough when cursor is after whitespace
   */
  handleStrikethroughAfterWhitespace(editor, cursor, line, beforeCursor) {
    const trimmedBeforeCursor = beforeCursor.trimEnd();
    if (this.hasNearbyStrikethroughMarkers(trimmedBeforeCursor)) {
      this.logger.debug("Word already has strikethrough, ignoring");
      return;
    }
    const lastSpaceIndex = trimmedBeforeCursor.lastIndexOf(" ");
    const wordStart = lastSpaceIndex === -1 ? 0 : lastSpaceIndex + 1;
    const wordEnd = trimmedBeforeCursor.length;
    const wordText = trimmedBeforeCursor.substring(wordStart);
    if (!wordText.trim())
      return;
    const strikethroughText = `~~${wordText}~~`;
    this.applyStrikethrough(
      editor,
      cursor,
      {
        line: cursor.line,
        ch: wordStart
      },
      {
        line: cursor.line,
        ch: wordEnd
      },
      strikethroughText
    );
    cursor.ch += 4;
    editor.setCursor(cursor);
  }
  /**
   * Handle strikethrough when cursor is on a word
   */
  handleStrikethroughAtCursor(editor, cursor, line, beforeCursor) {
    const lastWordMatch = beforeCursor.match(/(\s+)?([^\s]*)$/);
    let wordStart = 0;
    if (lastWordMatch && lastWordMatch.index !== void 0) {
      if (lastWordMatch[1]) {
        wordStart = lastWordMatch.index + lastWordMatch[1].length;
      } else {
        wordStart = lastWordMatch.index;
      }
    }
    const wordText = line.substring(wordStart, cursor.ch);
    if (!wordText.trim())
      return;
    if (this.hasStrikethroughInOrAroundWord(
      wordText,
      wordStart,
      cursor.ch,
      line
    )) {
      this.logger.debug("Word already has strikethrough, ignoring");
      return;
    }
    const strikethroughText = `~~${wordText}~~ `;
    this.applyStrikethrough(
      editor,
      cursor,
      {
        line: cursor.line,
        ch: wordStart
      },
      {
        line: cursor.line,
        ch: cursor.ch
      },
      strikethroughText
    );
    const newCursorCh = wordStart + strikethroughText.length;
    editor.setCursor({ line: cursor.line, ch: newCursorCh });
  }
  /**
   * Check if there are strikethrough markers in or around the word
   */
  hasStrikethroughInOrAroundWord(wordText, wordStart, wordEnd, line) {
    if (wordText.includes("~~"))
      return true;
    if (wordStart >= 2 && line.substring(wordStart - 2, wordStart) === "~~")
      return true;
    if (wordEnd + 2 <= line.length && line.substring(wordEnd, wordEnd + 2) === "~~")
      return true;
    return false;
  }
  /**
   * Apply strikethrough formatting to text
   */
  applyStrikethrough(editor, cursor, from, to, strikethroughText) {
    editor.replaceRange(strikethroughText, from, to);
  }
};
var Logger = class {
  constructor(level) {
    this.levels = {
      debug: 0,
      info: 1,
      warn: 2,
      error: 3
    };
    this.level = level;
  }
  shouldLog(messageLevel) {
    return this.levels[messageLevel] >= this.levels[this.level];
  }
  debug(...args) {
    if (this.shouldLog("debug")) {
      console.debug("[Pen Mode]", ...args);
    }
  }
  info(...args) {
    if (this.shouldLog("info")) {
      console.info("[Pen Mode]", ...args);
    }
  }
  warn(...args) {
    if (this.shouldLog("warn")) {
      console.warn("[Pen Mode]", ...args);
    }
  }
  error(...args) {
    if (this.shouldLog("error")) {
      console.error("[Pen Mode]", ...args);
    }
  }
};
var PenModeSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "Pen Mode Settings" });
    new import_obsidian.Setting(containerEl).setName("Log Level").setDesc("Set the logging level for debugging").addDropdown(
      (dropdown) => dropdown.addOptions({
        debug: "Debug",
        info: "Info",
        warn: "Warning",
        error: "Error"
      }).setValue(this.plugin.settings.logLevel).onChange(
        async (value) => {
          this.plugin.settings.logLevel = value;
          await this.plugin.saveSettings();
        }
      )
    );
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtcblx0UGx1Z2luLFxuXHRQbHVnaW5TZXR0aW5nVGFiLFxuXHROb3RpY2UsXG5cdEVkaXRvcixcblx0RWRpdG9yUG9zaXRpb24sXG5cdHNldEljb24sXG5cdE1hcmtkb3duVmlldyxcblx0U2V0dGluZyxcblx0QXBwLFxuXHRURmlsZSxcblx0bm9ybWFsaXplUGF0aCxcbn0gZnJvbSBcIm9ic2lkaWFuXCI7XG5cbmludGVyZmFjZSBQZW5Nb2RlUGx1Z2luU2V0dGluZ3Mge1xuXHRsb2dMZXZlbDogXCJkZWJ1Z1wiIHwgXCJpbmZvXCIgfCBcIndhcm5cIiB8IFwiZXJyb3JcIjtcblx0aXNBY3RpdmU6IGJvb2xlYW47XG59XG5cbmludGVyZmFjZSBPYnNpZGlhbkNvbmZpZyB7XG5cdHZpbU1vZGU6IGJvb2xlYW47XG5cdFtrZXk6IHN0cmluZ106IGFueTtcbn1cblxuY29uc3QgREVGQVVMVF9TRVRUSU5HUzogUGVuTW9kZVBsdWdpblNldHRpbmdzID0ge1xuXHRsb2dMZXZlbDogXCJ3YXJuXCIsXG5cdGlzQWN0aXZlOiBmYWxzZSxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBlbk1vZGVQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5nczogUGVuTW9kZVBsdWdpblNldHRpbmdzO1xuXHRwcml2YXRlIHN0YXR1c0Jhckl0ZW06IEhUTUxFbGVtZW50O1xuXHRwcml2YXRlIGlzQWN0aXZlID0gZmFsc2U7XG5cdHByaXZhdGUgbG9nZ2VyOiBMb2dnZXI7XG5cdHByaXZhdGUgcHJldmlvdXNWaW1Nb2RlU3RhdGUgPSBmYWxzZTtcblx0cHJpdmF0ZSBib3VuZEtleWRvd25IYW5kbGVyOiAoZXZlbnQ6IEtleWJvYXJkRXZlbnQpID0+IHZvaWQ7XG5cblx0LyoqXG5cdCAqIEhlbHBlciBtZXRob2QgdG8gZ2V0IHRoZSBhY3RpdmUgZWRpdG9yIHVzaW5nIG9ic2lkaWFuIGFwaVxuXHQgKiBAcmV0dXJucyBhY3RpdmUgZWRpdG9yIG9yIG51bGwgaWYgbm9uZSBleGlzdHNcblx0ICovXG5cdHByaXZhdGUgZ2V0QWN0aXZlRWRpdG9yKCk6IEVkaXRvciB8IG51bGwge1xuXHRcdGNvbnN0IHZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShNYXJrZG93blZpZXcpO1xuXHRcdHJldHVybiB2aWV3Py5lZGl0b3IgfHwgbnVsbDtcblx0fVxuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXHRcdHRoaXMubG9nZ2VyID0gbmV3IExvZ2dlcih0aGlzLnNldHRpbmdzLmxvZ0xldmVsKTtcblx0XHR0aGlzLmJvdW5kS2V5ZG93bkhhbmRsZXIgPSB0aGlzLmhhbmRsZUtleWRvd24uYmluZCh0aGlzKTtcblxuXHRcdC8vIGFkZCBzdGF0dXMgYmFyIGl0ZW0sIGhpZGRlbiBieSBkZWZhdWx0XG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtID0gdGhpcy5hZGRTdGF0dXNCYXJJdGVtKCk7XG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcblxuXHRcdC8vIGFkZCBjb21tYW5kIHRvIHRvZ2dsZSBwZW4gbW9kZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogXCJ0b2dnbGUtcGVuLW1vZGVcIixcblx0XHRcdG5hbWU6IFwiVG9nZ2xlIFBlbiBNb2RlXCIsXG5cdFx0XHRjYWxsYmFjazogKCkgPT4gdGhpcy50b2dnbGVQZW5Nb2RlKCksXG5cdFx0XHRob3RrZXlzOiBbXSxcblx0XHR9KTtcblxuXHRcdC8vIGFkZCBzZXR0aW5ncyB0YWIgKFRPRE8gdGhpcyBpcyBwcm9iIHVubmVjZXNzYXJ5KVxuXHRcdHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgUGVuTW9kZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIHJlc3RvcmUgcHJldmlvdXMgc3RhdGUgaWYgaXQgd2FzIGFjdGl2ZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmlzQWN0aXZlKSB7XG5cdFx0XHR0aGlzLmlzQWN0aXZlID0gdHJ1ZTtcblx0XHRcdHRoaXMuZW5hYmxlUGVuTW9kZSgpO1xuXHRcdFx0dGhpcy51cGRhdGVTdGF0dXNCYXIoKTtcblx0XHR9XG5cblx0XHR0aGlzLmxvZ2dlci5pbmZvKFwiUGVuIG1vZGUgcGx1Z2luIGxvYWRlZFwiKTtcblx0fVxuXG5cdG9udW5sb2FkKCkge1xuXHRcdC8vIGNsZWFuIHVwIGV2ZW50IGxpc3RlbmVyc1xuXHRcdGlmICh0aGlzLmlzQWN0aXZlKSB7XG5cdFx0XHR0aGlzLmRpc2FibGVQZW5Nb2RlKCk7XG5cdFx0fVxuXHRcdHRoaXMubG9nZ2VyLmluZm8oXCJQZW4gbW9kZSBwbHVnaW4gdW5sb2FkZWRcIik7XG5cdH1cblxuXHRhc3luYyBsb2FkU2V0dGluZ3MoKSB7XG5cdFx0dGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oXG5cdFx0XHR7fSxcblx0XHRcdERFRkFVTFRfU0VUVElOR1MsXG5cdFx0XHRhd2FpdCB0aGlzLmxvYWREYXRhKClcblx0XHQpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHRwcml2YXRlIHRvZ2dsZVBlbk1vZGUoKSB7XG5cdFx0dGhpcy5pc0FjdGl2ZSA9ICF0aGlzLmlzQWN0aXZlO1xuXG5cdFx0aWYgKHRoaXMuaXNBY3RpdmUpIHtcblx0XHRcdHRoaXMuZW5hYmxlUGVuTW9kZSgpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLmRpc2FibGVQZW5Nb2RlKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zZXR0aW5ncy5pc0FjdGl2ZSA9IHRoaXMuaXNBY3RpdmU7XG5cdFx0dGhpcy5zYXZlU2V0dGluZ3MoKTtcblxuXHRcdHRoaXMudXBkYXRlU3RhdHVzQmFyKCk7XG5cblx0XHQvLyBzaG93IG5vdGlmaWNhdGlvblxuXHRcdG5ldyBOb3RpY2UoYFBlbiBNb2RlICR7dGhpcy5pc0FjdGl2ZSA/IFwiZW5hYmxlZFwiIDogXCJkaXNhYmxlZFwifWApO1xuXHRcdHRoaXMubG9nZ2VyLmluZm8oYFBlbiBNb2RlICR7dGhpcy5pc0FjdGl2ZSA/IFwiZW5hYmxlZFwiIDogXCJkaXNhYmxlZFwifWApO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJlYWQgdGhlIE9ic2lkaWFuIGNvbmZpZyBmaWxlXG5cdCAqIEByZXR1cm5zIFByb21pc2Ugd2l0aCB0aGUgY29uZmlnIG9iamVjdFxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyByZWFkT2JzaWRpYW5Db25maWcoKTogUHJvbWlzZTxPYnNpZGlhbkNvbmZpZz4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb25maWdQYXRoID0gbm9ybWFsaXplUGF0aChcblx0XHRcdFx0YCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9hcHAuanNvbmBcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBjb25maWdEYXRhID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuYWRhcHRlci5yZWFkKGNvbmZpZ1BhdGgpO1xuXHRcdFx0cmV0dXJuIEpTT04ucGFyc2UoY29uZmlnRGF0YSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMubG9nZ2VyLmVycm9yKFwiRXJyb3IgcmVhZGluZyBPYnNpZGlhbiBjb25maWc6IFwiLCBlcnJvcik7XG5cdFx0XHR0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gcmVhZCBPYnNpZGlhbiBjb25maWdcIik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFdyaXRlIHRvIHRoZSBPYnNpZGlhbiBjb25maWcgZmlsZVxuXHQgKiBAcGFyYW0gY29uZmlnIFRoZSBjb25maWcgb2JqZWN0IHRvIHdyaXRlXG5cdCAqL1xuXHRwcml2YXRlIGFzeW5jIHdyaXRlT2JzaWRpYW5Db25maWcoY29uZmlnOiBPYnNpZGlhbkNvbmZpZyk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb25maWdQYXRoID0gbm9ybWFsaXplUGF0aChcblx0XHRcdFx0YCR7dGhpcy5hcHAudmF1bHQuY29uZmlnRGlyfS9hcHAuanNvbmBcblx0XHRcdCk7XG5cdFx0XHRjb25zdCBjb25maWdEYXRhID0gSlNPTi5zdHJpbmdpZnkoY29uZmlnLCBudWxsLCAyKTtcblx0XHRcdGF3YWl0IHRoaXMuYXBwLnZhdWx0LmFkYXB0ZXIud3JpdGUoY29uZmlnUGF0aCwgY29uZmlnRGF0YSk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMubG9nZ2VyLmVycm9yKFwiRXJyb3Igd3JpdGluZyBPYnNpZGlhbiBjb25maWc6XCIsIGVycm9yKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byB3cml0ZSBPYnNpZGlhbiBjb25maWdcIik7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNldCBWaW0gbW9kZSB0byBhIHNwZWNpZmljIHN0YXRlXG5cdCAqIEBwYXJhbSBlbmFibGVWaW0gV2hldGhlciB0byBlbmFibGUgb3IgZGlzYWJsZSBWaW0gbW9kZVxuXHQgKi9cblx0cHJpdmF0ZSBhc3luYyBzZXRWaW1Nb2RlKGVuYWJsZVZpbTogYm9vbGVhbik6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRyeSB7XG5cdFx0XHRjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLnJlYWRPYnNpZGlhbkNvbmZpZygpO1xuXG5cdFx0XHQvLyBTdG9yZSBjdXJyZW50IHN0YXRlIGJlZm9yZSBjaGFuZ2luZ1xuXHRcdFx0dGhpcy5wcmV2aW91c1ZpbU1vZGVTdGF0ZSA9IGNvbmZpZy52aW1Nb2RlO1xuXG5cdFx0XHQvLyBVcGRhdGUgY29uZmlnXG5cdFx0XHRjb25maWcudmltTW9kZSA9IGVuYWJsZVZpbTtcblx0XHRcdGF3YWl0IHRoaXMud3JpdGVPYnNpZGlhbkNvbmZpZyhjb25maWcpO1xuXG5cdFx0XHR0aGlzLmxvZ2dlci5pbmZvKGBWaW0gbW9kZSAke2VuYWJsZVZpbSA/IFwiZW5hYmxlZFwiIDogXCJkaXNhYmxlZFwifWApO1xuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5lcnJvcihcIkVycm9yIHNldHRpbmcgdXAgVmltIG1vZGU6XCIsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gdXBkYXRlIHZpbSBtb2RlIHNldHRpbmdzXCIpO1xuXHRcdH1cblx0fVxuXG5cdHByaXZhdGUgYXN5bmMgZW5hYmxlUGVuTW9kZSgpIHtcblx0XHQvLyBzaG93IHN0YXR1cyBiYXIgaW5kaWNhdG9yXG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtLnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCI7XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gcmVhZCBjdXJyZW50IHZpbSBtb2RlIHN0YXRlIGFuZCBzYXZlIGl0XG5cdFx0XHRjb25zdCBjb25maWcgPSBhd2FpdCB0aGlzLnJlYWRPYnNpZGlhbkNvbmZpZygpO1xuXHRcdFx0dGhpcy5wcmV2aW91c1ZpbU1vZGVTdGF0ZSA9IGNvbmZpZy52aW1Nb2RlO1xuXG5cdFx0XHQvLyBkaXNhYmxlIHZpbSBtb2RlIGlmIGFjdGl2ZVxuXHRcdFx0aWYgKGNvbmZpZy52aW1Nb2RlKSB7XG5cdFx0XHRcdGNvbmZpZy52aW1Nb2RlID0gZmFsc2U7XG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVPYnNpZGlhbkNvbmZpZyhjb25maWcpO1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFwiVmltIG1vZGUgZGlzYWJsZWQgZm9yIFBlbiBNb2RlXCIpO1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGVycm9yKSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5lcnJvcihcblx0XHRcdFx0XCJFcnJvciBoYW5kbGluZyBWaW0gbW9kZSB3aGVuIGVuYWJsaW5nIFBlbiBNb2RlOlwiLFxuXHRcdFx0XHRlcnJvclxuXHRcdFx0KTtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gdXBkYXRlIFZpbSBtb2RlIHNldHRpbmdzXCIpO1xuXHRcdH1cblxuXHRcdC8vIGFkZCB2aXN1YWwgaW5kaWNhdG9yIHRvIHNjcmVlblxuXHRcdHRoaXMuYWRkRWRpdG9yVmlzdWFsSW5kaWNhdG9yKCk7XG5cblx0XHQvLyB1bnJlZ2lzdGVyIGFueSBleGlzdGluZyBoYW5kbGVycyBmaXJzdCB0byBhdm9pZCBkdXBsaWNhdGVzXG5cdFx0ZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5ib3VuZEtleWRvd25IYW5kbGVyLCB0cnVlKTtcblxuXHRcdC8vIHJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIHdpdGggY2FwdHVyZSBwaGFzZVxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuYm91bmRLZXlkb3duSGFuZGxlciwgdHJ1ZSk7XG5cdFx0dGhpcy5sb2dnZXIuaW5mbyhcblx0XHRcdFwiS2V5Ym9hcmQgZXZlbnQgaGFuZGxlciByZWdpc3RlcmVkIHdpdGggY2FwdHVyZSBwaGFzZVwiXG5cdFx0KTtcblxuXHRcdC8vIGFsc28gcmVnaXN0ZXIgdGhyb3VnaCBvYnNpZGlhbiBhcGkgYXMgZmFsbGJhY2tcblx0XHR0aGlzLnJlZ2lzdGVyRG9tRXZlbnQoXG5cdFx0XHRkb2N1bWVudCxcblx0XHRcdFwia2V5ZG93blwiLFxuXHRcdFx0dGhpcy5ib3VuZEtleWRvd25IYW5kbGVyLFxuXHRcdFx0dHJ1ZVxuXHRcdCk7XG5cdH1cblxuXHRwcml2YXRlIGFzeW5jIGRpc2FibGVQZW5Nb2RlKCkge1xuXHRcdC8vIGhpZGUgc3RhdHVzIGJhciBpbmRpY2F0b3Jcblx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0uc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xuXG5cdFx0Ly8gcmVtb3ZlIHZpc3VhbCBpbmRpY2F0b3Jcblx0XHR0aGlzLnJlbW92ZUVkaXRvclZpc3VhbEluZGljYXRvcigpO1xuXG5cdFx0Ly8gdW5yZWdpc3RlciBldmVudCBoYW5kbGVyc1xuXHRcdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuYm91bmRLZXlkb3duSGFuZGxlciwgdHJ1ZSk7XG5cblx0XHR0cnkge1xuXHRcdFx0Ly8gcmVzdG9yZSBwcmV2aW91cyB2aW0gbW9kZSBzdGF0ZVxuXHRcdFx0Y29uc3QgY29uZmlnID0gYXdhaXQgdGhpcy5yZWFkT2JzaWRpYW5Db25maWcoKTtcblx0XHRcdGlmIChjb25maWcudmltTW9kZSAhPT0gdGhpcy5wcmV2aW91c1ZpbU1vZGVTdGF0ZSkge1xuXHRcdFx0XHRjb25maWcudmltTW9kZSA9IHRoaXMucHJldmlvdXNWaW1Nb2RlU3RhdGU7XG5cdFx0XHRcdGF3YWl0IHRoaXMud3JpdGVPYnNpZGlhbkNvbmZpZyhjb25maWcpO1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5pbmZvKFxuXHRcdFx0XHRcdGBWaW0gbW9kZSByZXN0b3JlZCB0byAke1xuXHRcdFx0XHRcdFx0dGhpcy5wcmV2aW91c1ZpbU1vZGVTdGF0ZSA/IFwiZW5hYmxlZFwiIDogXCJkaXNhYmxlZFwiXG5cdFx0XHRcdFx0fWBcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlcnJvcikge1xuXHRcdFx0dGhpcy5sb2dnZXIuZXJyb3IoXCJFcnJvciByZXN0b3JpbmcgdmltIG1vZGU6XCIsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gcmVzdG9yZSB2aW0gbW9kZSBzZXR0aW5nc1wiKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIGFkZEVkaXRvclZpc3VhbEluZGljYXRvcigpIHtcblx0XHRjb25zdCBlZGl0b3JFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY20tZWRpdG9yXCIpO1xuXHRcdGlmIChlZGl0b3JFbCkge1xuXHRcdFx0ZWRpdG9yRWwuY2xhc3NMaXN0LmFkZChcInBlbi1tb2RlLWFjdGl2ZVwiKTtcblxuXHRcdFx0Ly8gYWRkIGNzcyBmb3IgdGhlIHZpc3VhbCBpbmRpY2F0b3Jcblx0XHRcdGNvbnN0IGV4aXN0aW5nU3R5bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInBlbi1tb2RlLXN0eWxlXCIpO1xuXHRcdFx0aWYgKCFleGlzdGluZ1N0eWxlKSB7XG5cdFx0XHRcdGNvbnN0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO1xuXHRcdFx0XHRzdHlsZS5pZCA9IFwicGVuLW1vZGUtc3R5bGVcIjtcblx0XHRcdFx0c3R5bGUudGV4dENvbnRlbnQgPSBgXG5cdFx0XHRcdFx0LnBlbi1tb2RlLWFjdGl2ZSB7XG5cdFx0XHRcdFx0XHRib3JkZXI6IDJweCBzb2xpZCByZ2JhKDEyMCwgMTYwLCAyNTUsIDAuNCkgIWltcG9ydGFudDtcblx0XHRcdFx0XHRcdGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTIwLCAxNjAsIDI1NSwgMC4wNSkgIWltcG9ydGFudFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0YDtcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzdHlsZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cHJpdmF0ZSByZW1vdmVFZGl0b3JWaXN1YWxJbmRpY2F0b3IoKSB7XG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5jbS1lZGl0b3JcIikuZm9yRWFjaCgoZWwpID0+IHtcblx0XHRcdGVsLmNsYXNzTGlzdC5yZW1vdmUoXCJwZW4tbW9kZS1hY3RpdmVcIik7XG5cdFx0fSk7XG5cdH1cblxuXHRwcml2YXRlIHVwZGF0ZVN0YXR1c0JhcigpIHtcblx0XHR0aGlzLnN0YXR1c0Jhckl0ZW0uZW1wdHkoKTtcblx0XHRzZXRJY29uKHRoaXMuc3RhdHVzQmFySXRlbSwgXCJwZW5jaWxcIik7XG5cdFx0dGhpcy5zdGF0dXNCYXJJdGVtLmNyZWF0ZVNwYW4oeyB0ZXh0OiBcIiBQZW4gTW9kZVwiIH0pO1xuXHR9XG5cblx0cHJpdmF0ZSBoYW5kbGVLZXlkb3duKGV2ZW50OiBLZXlib2FyZEV2ZW50KSB7XG5cdFx0aWYgKCF0aGlzLmlzQWN0aXZlKSByZXR1cm47XG5cblx0XHRjb25zdCBkaXNhYmxlZEtleXMgPSBbXG5cdFx0XHRcIkFycm93VXBcIixcblx0XHRcdFwiQXJyb3dEb3duXCIsXG5cdFx0XHRcIkFycm93UmlnaHRcIixcblx0XHRcdFwiRGVsZXRlXCIsXG5cdFx0XHRcIkJhY2tzcGFjZVwiLFxuXHRcdFx0XCJQYWdlVXBcIixcblx0XHRcdFwiUGFnZURvd25cIixcblx0XHRdO1xuXG5cdFx0aWYgKGRpc2FibGVkS2V5cy5pbmNsdWRlcyhldmVudC5rZXkpKSB7XG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHR0aGlzLmxvZ2dlci5kZWJ1ZyhgUHJldmVudGVkIGtleTogJHtldmVudC5rZXl9YCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKGV2ZW50LmtleSA9PT0gXCJBcnJvd0xlZnRcIikge1xuXHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdHRoaXMuc3RyaWtldGhyb3VnaExhc3RXb3JkKCk7XG5cdFx0XHR0aGlzLmxvZ2dlci5kZWJ1ZyhcIlN0cmlrZXRocm91Z2ggYXBwbGllZFwiKTtcblx0XHR9XG5cdH1cblxuXHRwcml2YXRlIHN0cmlrZXRocm91Z2hMYXN0V29yZCgpIHtcblx0XHRjb25zdCBlZGl0b3IgPSB0aGlzLmdldEFjdGl2ZUVkaXRvcigpO1xuXHRcdGlmICghZWRpdG9yKSByZXR1cm47XG5cblx0XHR0cnkge1xuXHRcdFx0Y29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xuXHRcdFx0Y29uc3QgbGluZSA9IGVkaXRvci5nZXRMaW5lKGN1cnNvci5saW5lKTtcblx0XHRcdGNvbnN0IGJlZm9yZUN1cnNvciA9IGxpbmUuc2xpY2UoMCwgY3Vyc29yLmNoKTtcblxuXHRcdFx0Ly8gRWFybHkgZXhpdCBpZiB3ZSBkZXRlY3Qgc3RyaWtldGhyb3VnaCBtYXJrZXJzIG5lYXJieVxuXHRcdFx0aWYgKHRoaXMuaGFzTmVhcmJ5U3RyaWtldGhyb3VnaE1hcmtlcnMoYmVmb3JlQ3Vyc29yKSkge1xuXHRcdFx0XHR0aGlzLmxvZ2dlci5kZWJ1Zyhcblx0XHRcdFx0XHRcIldvcmQgYWxyZWFkeSBoYXMgc3RyaWtldGhyb3VnaCBhcHBsaWVkLCBpZ25vcmluZ1wiXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FzZSAxOiBDdXJzb3IgaXMgYWZ0ZXIgd2hpdGVzcGFjZSAtIGhhbmRsZSB0aGUgbGFzdCB3b3JkIGJlZm9yZSB0aGUgd2hpdGVzcGFjZVxuXHRcdFx0Y29uc3QgaXNBZnRlcldoaXRlc3BhY2UgPVxuXHRcdFx0XHRiZWZvcmVDdXJzb3IubGVuZ3RoID4gMCAmJiAvXFxzJC8udGVzdChiZWZvcmVDdXJzb3IpO1xuXHRcdFx0aWYgKGlzQWZ0ZXJXaGl0ZXNwYWNlKSB7XG5cdFx0XHRcdHRoaXMuaGFuZGxlU3RyaWtldGhyb3VnaEFmdGVyV2hpdGVzcGFjZShcblx0XHRcdFx0XHRlZGl0b3IsXG5cdFx0XHRcdFx0Y3Vyc29yLFxuXHRcdFx0XHRcdGxpbmUsXG5cdFx0XHRcdFx0YmVmb3JlQ3Vyc29yXG5cdFx0XHRcdCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2FzZSAyOiBDdXJzb3IgaXMgb24gYSB3b3JkIC0gaGFuZGxlIHRoZSB3b3JkIGF0IGN1cnNvclxuXHRcdFx0dGhpcy5oYW5kbGVTdHJpa2V0aHJvdWdoQXRDdXJzb3IoXG5cdFx0XHRcdGVkaXRvcixcblx0XHRcdFx0Y3Vyc29yLFxuXHRcdFx0XHRsaW5lLFxuXHRcdFx0XHRiZWZvcmVDdXJzb3Jcblx0XHRcdCk7XG5cdFx0fSBjYXRjaCAoZXJyb3IpIHtcblx0XHRcdHRoaXMubG9nZ2VyLmVycm9yKFwiRXJyb3IgYXBwbHlpbmcgc3RyaWtldGhyb3VnaDogXCIsIGVycm9yKTtcblx0XHRcdG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gYXBwbHkgc3RyaWtldGhyb3VnaFwiKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlcmUgYXJlIHN0cmlrZXRocm91Z2ggbWFya2VycyBuZWFyIHRoZSBjdXJzb3Jcblx0ICovXG5cdHByaXZhdGUgaGFzTmVhcmJ5U3RyaWtldGhyb3VnaE1hcmtlcnModGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG5cdFx0Ly8gQ2hlY2sgaWYgdGV4dCBlbmRzIHdpdGggc3RyaWtldGhyb3VnaCBtYXJrZXJzXG5cdFx0aWYgKHRleHQuZW5kc1dpdGgoXCJ+flwiKSkgcmV0dXJuIHRydWU7XG5cblx0XHQvLyBDaGVjayBpZiBzdHJpa2V0aHJvdWdoIG1hcmtlcnMgYXBwZWFyIGluIHRoZSBsYXN0IDQgY2hhcmFjdGVyc1xuXHRcdGlmICh0ZXh0Lmxlbmd0aCA+PSA0ICYmIHRleHQuc3Vic3RyaW5nKHRleHQubGVuZ3RoIC0gNCkuaW5jbHVkZXMoXCJ+flwiKSlcblx0XHRcdHJldHVybiB0cnVlO1xuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEhhbmRsZSBzdHJpa2V0aHJvdWdoIHdoZW4gY3Vyc29yIGlzIGFmdGVyIHdoaXRlc3BhY2Vcblx0ICovXG5cdHByaXZhdGUgaGFuZGxlU3RyaWtldGhyb3VnaEFmdGVyV2hpdGVzcGFjZShcblx0XHRlZGl0b3I6IEVkaXRvcixcblx0XHRjdXJzb3I6IEVkaXRvclBvc2l0aW9uLFxuXHRcdGxpbmU6IHN0cmluZyxcblx0XHRiZWZvcmVDdXJzb3I6IHN0cmluZ1xuXHQpIHtcblx0XHRjb25zdCB0cmltbWVkQmVmb3JlQ3Vyc29yID0gYmVmb3JlQ3Vyc29yLnRyaW1FbmQoKTtcblxuXHRcdC8vIENoZWNrIGZvciBzdHJpa2V0aHJvdWdoIG1hcmtlcnMgaW4gdGhlIGxhc3Qgd29yZFxuXHRcdGlmICh0aGlzLmhhc05lYXJieVN0cmlrZXRocm91Z2hNYXJrZXJzKHRyaW1tZWRCZWZvcmVDdXJzb3IpKSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5kZWJ1ZyhcIldvcmQgYWxyZWFkeSBoYXMgc3RyaWtldGhyb3VnaCwgaWdub3JpbmdcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmluZCB0aGUgc3RhcnQgb2YgdGhlIGxhc3Qgd29yZFxuXHRcdGNvbnN0IGxhc3RTcGFjZUluZGV4ID0gdHJpbW1lZEJlZm9yZUN1cnNvci5sYXN0SW5kZXhPZihcIiBcIik7XG5cdFx0Y29uc3Qgd29yZFN0YXJ0ID0gbGFzdFNwYWNlSW5kZXggPT09IC0xID8gMCA6IGxhc3RTcGFjZUluZGV4ICsgMTtcblx0XHRjb25zdCB3b3JkRW5kID0gdHJpbW1lZEJlZm9yZUN1cnNvci5sZW5ndGg7XG5cblx0XHQvLyBHZXQgdGhlIHRleHQgdG8gc3RyaWtldGhyb3VnaFxuXHRcdGNvbnN0IHdvcmRUZXh0ID0gdHJpbW1lZEJlZm9yZUN1cnNvci5zdWJzdHJpbmcod29yZFN0YXJ0KTtcblxuXHRcdC8vIE9ubHkgcHJvY2VlZCBpZiB0aGVyZSBpcyB0ZXh0IHRvIHN0cmlrZXRocm91Z2hcblx0XHRpZiAoIXdvcmRUZXh0LnRyaW0oKSkgcmV0dXJuO1xuXG5cdFx0Ly8gQXBwbHkgc3RyaWtldGhyb3VnaFxuXHRcdGNvbnN0IHN0cmlrZXRocm91Z2hUZXh0ID0gYH5+JHt3b3JkVGV4dH1+fmA7XG5cdFx0dGhpcy5hcHBseVN0cmlrZXRocm91Z2goXG5cdFx0XHRlZGl0b3IsXG5cdFx0XHRjdXJzb3IsXG5cdFx0XHR7XG5cdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxuXHRcdFx0XHRjaDogd29yZFN0YXJ0LFxuXHRcdFx0fSxcblx0XHRcdHtcblx0XHRcdFx0bGluZTogY3Vyc29yLmxpbmUsXG5cdFx0XHRcdGNoOiB3b3JkRW5kLFxuXHRcdFx0fSxcblx0XHRcdHN0cmlrZXRocm91Z2hUZXh0XG5cdFx0KTtcblxuXHRcdC8vIGFkanVzdCBjdXJzb3IgcG9zaXRpb25cblx0XHRjdXJzb3IuY2ggKz0gNDtcblx0XHRlZGl0b3Iuc2V0Q3Vyc29yKGN1cnNvcik7XG5cdH1cblxuXHQvKipcblx0ICogSGFuZGxlIHN0cmlrZXRocm91Z2ggd2hlbiBjdXJzb3IgaXMgb24gYSB3b3JkXG5cdCAqL1xuXHRwcml2YXRlIGhhbmRsZVN0cmlrZXRocm91Z2hBdEN1cnNvcihcblx0XHRlZGl0b3I6IEVkaXRvcixcblx0XHRjdXJzb3I6IEVkaXRvclBvc2l0aW9uLFxuXHRcdGxpbmU6IHN0cmluZyxcblx0XHRiZWZvcmVDdXJzb3I6IHN0cmluZ1xuXHQpIHtcblx0XHQvLyBGaW5kIHRoZSB3b3JkIGF0IGN1cnNvclxuXHRcdGNvbnN0IGxhc3RXb3JkTWF0Y2ggPSBiZWZvcmVDdXJzb3IubWF0Y2goLyhcXHMrKT8oW15cXHNdKikkLyk7XG5cdFx0bGV0IHdvcmRTdGFydCA9IDA7XG5cblx0XHRpZiAobGFzdFdvcmRNYXRjaCAmJiBsYXN0V29yZE1hdGNoLmluZGV4ICE9PSB1bmRlZmluZWQpIHtcblx0XHRcdGlmIChsYXN0V29yZE1hdGNoWzFdKSB7XG5cdFx0XHRcdC8vIElmIHRoZXJlIHdhcyB3aGl0ZXNwYWNlIGJlZm9yZSB0aGUgd29yZCwgc3RhcnQgYWZ0ZXIgaXRcblx0XHRcdFx0d29yZFN0YXJ0ID0gbGFzdFdvcmRNYXRjaC5pbmRleCArIGxhc3RXb3JkTWF0Y2hbMV0ubGVuZ3RoO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHN0YXJ0IGF0IHRoZSBiZWdpbm5pbmcgb2YgdGhlIG1hdGNoXG5cdFx0XHRcdHdvcmRTdGFydCA9IGxhc3RXb3JkTWF0Y2guaW5kZXg7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHdvcmQgaXMgYmV0d2VlbiB3b3JkU3RhcnQgYW5kIGN1cnNvciBwb3NpdGlvblxuXHRcdGNvbnN0IHdvcmRUZXh0ID0gbGluZS5zdWJzdHJpbmcod29yZFN0YXJ0LCBjdXJzb3IuY2gpO1xuXG5cdFx0Ly8gT25seSBwcm9jZWVkIGlmIHRoZXJlIGlzIGFjdHVhbCB0ZXh0IHRvIHN0cmlrZXRocm91Z2hcblx0XHRpZiAoIXdvcmRUZXh0LnRyaW0oKSkgcmV0dXJuO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIHN0cmlrZXRocm91Z2ggbWFya2VycyBpbiBvciBhcm91bmQgdGhlIHdvcmRcblx0XHRpZiAoXG5cdFx0XHR0aGlzLmhhc1N0cmlrZXRocm91Z2hJbk9yQXJvdW5kV29yZChcblx0XHRcdFx0d29yZFRleHQsXG5cdFx0XHRcdHdvcmRTdGFydCxcblx0XHRcdFx0Y3Vyc29yLmNoLFxuXHRcdFx0XHRsaW5lXG5cdFx0XHQpXG5cdFx0KSB7XG5cdFx0XHR0aGlzLmxvZ2dlci5kZWJ1ZyhcIldvcmQgYWxyZWFkeSBoYXMgc3RyaWtldGhyb3VnaCwgaWdub3JpbmdcIik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgc3RyaWtldGhyb3VnaCBhbmQgYWRkIGEgc3BhY2UgYXQgdGhlIGVuZFxuXHRcdGNvbnN0IHN0cmlrZXRocm91Z2hUZXh0ID0gYH5+JHt3b3JkVGV4dH1+fiBgO1xuXHRcdHRoaXMuYXBwbHlTdHJpa2V0aHJvdWdoKFxuXHRcdFx0ZWRpdG9yLFxuXHRcdFx0Y3Vyc29yLFxuXHRcdFx0e1xuXHRcdFx0XHRsaW5lOiBjdXJzb3IubGluZSxcblx0XHRcdFx0Y2g6IHdvcmRTdGFydCxcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdGxpbmU6IGN1cnNvci5saW5lLFxuXHRcdFx0XHRjaDogY3Vyc29yLmNoLFxuXHRcdFx0fSxcblx0XHRcdHN0cmlrZXRocm91Z2hUZXh0XG5cdFx0KTtcblxuXHRcdC8vIE1vdmUgY3Vyc29yIHRvIGFmdGVyIHRoZSBzcGFjZSB0aGF0IHdhcyBqdXN0IGFkZGVkXG5cdFx0Y29uc3QgbmV3Q3Vyc29yQ2ggPSB3b3JkU3RhcnQgKyBzdHJpa2V0aHJvdWdoVGV4dC5sZW5ndGg7XG5cdFx0ZWRpdG9yLnNldEN1cnNvcih7IGxpbmU6IGN1cnNvci5saW5lLCBjaDogbmV3Q3Vyc29yQ2ggfSk7XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlcmUgYXJlIHN0cmlrZXRocm91Z2ggbWFya2VycyBpbiBvciBhcm91bmQgdGhlIHdvcmRcblx0ICovXG5cdHByaXZhdGUgaGFzU3RyaWtldGhyb3VnaEluT3JBcm91bmRXb3JkKFxuXHRcdHdvcmRUZXh0OiBzdHJpbmcsXG5cdFx0d29yZFN0YXJ0OiBudW1iZXIsXG5cdFx0d29yZEVuZDogbnVtYmVyLFxuXHRcdGxpbmU6IHN0cmluZ1xuXHQpOiBib29sZWFuIHtcblx0XHQvLyBDaGVjayBpZiB0aGUgd29yZCBpdHNlbGYgY29udGFpbnMgc3RyaWtldGhyb3VnaCBtYXJrZXJzXG5cdFx0aWYgKHdvcmRUZXh0LmluY2x1ZGVzKFwifn5cIikpIHJldHVybiB0cnVlO1xuXG5cdFx0Ly8gQ2hlY2sgaWYgdGhlcmUgYXJlIHN0cmlrZXRocm91Z2ggbWFya2VycyByaWdodCBiZWZvcmUgdGhlIHdvcmRcblx0XHRpZiAod29yZFN0YXJ0ID49IDIgJiYgbGluZS5zdWJzdHJpbmcod29yZFN0YXJ0IC0gMiwgd29yZFN0YXJ0KSA9PT0gXCJ+flwiKVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHQvLyBDaGVjayBpZiB0aGVyZSBhcmUgc3RyaWtldGhyb3VnaCBtYXJrZXJzIHJpZ2h0IGFmdGVyIHRoZSB3b3JkXG5cdFx0aWYgKFxuXHRcdFx0d29yZEVuZCArIDIgPD0gbGluZS5sZW5ndGggJiZcblx0XHRcdGxpbmUuc3Vic3RyaW5nKHdvcmRFbmQsIHdvcmRFbmQgKyAyKSA9PT0gXCJ+flwiXG5cdFx0KVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cblxuXHQvKipcblx0ICogQXBwbHkgc3RyaWtldGhyb3VnaCBmb3JtYXR0aW5nIHRvIHRleHRcblx0ICovXG5cdHByaXZhdGUgYXBwbHlTdHJpa2V0aHJvdWdoKFxuXHRcdGVkaXRvcjogRWRpdG9yLFxuXHRcdGN1cnNvcjogRWRpdG9yUG9zaXRpb24sXG5cdFx0ZnJvbTogRWRpdG9yUG9zaXRpb24sXG5cdFx0dG86IEVkaXRvclBvc2l0aW9uLFxuXHRcdHN0cmlrZXRocm91Z2hUZXh0OiBzdHJpbmdcblx0KSB7XG5cdFx0ZWRpdG9yLnJlcGxhY2VSYW5nZShzdHJpa2V0aHJvdWdoVGV4dCwgZnJvbSwgdG8pO1xuXHR9XG59XG5cbmNsYXNzIExvZ2dlciB7XG5cdHByaXZhdGUgbGV2ZWw6IFwiZGVidWdcIiB8IFwiaW5mb1wiIHwgXCJ3YXJuXCIgfCBcImVycm9yXCI7XG5cdHByaXZhdGUgbGV2ZWxzOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xuXHRcdGRlYnVnOiAwLFxuXHRcdGluZm86IDEsXG5cdFx0d2FybjogMixcblx0XHRlcnJvcjogMyxcblx0fTtcblxuXHRjb25zdHJ1Y3RvcihsZXZlbDogXCJkZWJ1Z1wiIHwgXCJpbmZvXCIgfCBcIndhcm5cIiB8IFwiZXJyb3JcIikge1xuXHRcdHRoaXMubGV2ZWwgPSBsZXZlbDtcblx0fVxuXG5cdHByaXZhdGUgc2hvdWxkTG9nKFxuXHRcdG1lc3NhZ2VMZXZlbDogXCJkZWJ1Z1wiIHwgXCJpbmZvXCIgfCBcIndhcm5cIiB8IFwiZXJyb3JcIlxuXHQpOiBib29sZWFuIHtcblx0XHRyZXR1cm4gdGhpcy5sZXZlbHNbbWVzc2FnZUxldmVsXSA+PSB0aGlzLmxldmVsc1t0aGlzLmxldmVsXTtcblx0fVxuXG5cdGRlYnVnKC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0aWYgKHRoaXMuc2hvdWxkTG9nKFwiZGVidWdcIikpIHtcblx0XHRcdGNvbnNvbGUuZGVidWcoXCJbUGVuIE1vZGVdXCIsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxuXG5cdGluZm8oLi4uYXJnczogYW55W10pIHtcblx0XHRpZiAodGhpcy5zaG91bGRMb2coXCJpbmZvXCIpKSB7XG5cdFx0XHRjb25zb2xlLmluZm8oXCJbUGVuIE1vZGVdXCIsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxuXHR3YXJuKC4uLmFyZ3M6IGFueVtdKSB7XG5cdFx0aWYgKHRoaXMuc2hvdWxkTG9nKFwid2FyblwiKSkge1xuXHRcdFx0Y29uc29sZS53YXJuKFwiW1BlbiBNb2RlXVwiLCAuLi5hcmdzKTtcblx0XHR9XG5cdH1cblx0ZXJyb3IoLi4uYXJnczogYW55W10pIHtcblx0XHRpZiAodGhpcy5zaG91bGRMb2coXCJlcnJvclwiKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihcIltQZW4gTW9kZV1cIiwgLi4uYXJncyk7XG5cdFx0fVxuXHR9XG59XG5cbmNsYXNzIFBlbk1vZGVTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogUGVuTW9kZVBsdWdpbjtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBQZW5Nb2RlUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cblx0XHRjb250YWluZXJFbC5jcmVhdGVFbChcImgyXCIsIHsgdGV4dDogXCJQZW4gTW9kZSBTZXR0aW5nc1wiIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZShcIkxvZyBMZXZlbFwiKVxuXHRcdFx0LnNldERlc2MoXCJTZXQgdGhlIGxvZ2dpbmcgbGV2ZWwgZm9yIGRlYnVnZ2luZ1wiKVxuXHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT5cblx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHQuYWRkT3B0aW9ucyh7XG5cdFx0XHRcdFx0XHRkZWJ1ZzogXCJEZWJ1Z1wiLFxuXHRcdFx0XHRcdFx0aW5mbzogXCJJbmZvXCIsXG5cdFx0XHRcdFx0XHR3YXJuOiBcIldhcm5pbmdcIixcblx0XHRcdFx0XHRcdGVycm9yOiBcIkVycm9yXCIsXG5cdFx0XHRcdFx0fSlcblx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubG9nTGV2ZWwpXG5cdFx0XHRcdFx0Lm9uQ2hhbmdlKFxuXHRcdFx0XHRcdFx0YXN5bmMgKHZhbHVlOiBcImRlYnVnXCIgfCBcImluZm9cIiB8IFwid2FyblwiIHwgXCJlcnJvclwiKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmxvZ0xldmVsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdClcblx0XHRcdCk7XG5cdH1cbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxzQkFZTztBQVlQLElBQU0sbUJBQTBDO0FBQUEsRUFDL0MsVUFBVTtBQUFBLEVBQ1YsVUFBVTtBQUNYO0FBRUEsSUFBcUIsZ0JBQXJCLGNBQTJDLHVCQUFPO0FBQUEsRUFBbEQ7QUFBQTtBQUdDLFNBQVEsV0FBVztBQUVuQixTQUFRLHVCQUF1QjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU92QixrQkFBaUM7QUFDeEMsVUFBTSxPQUFPLEtBQUssSUFBSSxVQUFVLG9CQUFvQiw0QkFBWTtBQUNoRSxZQUFPLDZCQUFNLFdBQVU7QUFBQSxFQUN4QjtBQUFBLEVBRUEsTUFBTSxTQUFTO0FBQ2QsVUFBTSxLQUFLLGFBQWE7QUFDeEIsU0FBSyxTQUFTLElBQUksT0FBTyxLQUFLLFNBQVMsUUFBUTtBQUMvQyxTQUFLLHNCQUFzQixLQUFLLGNBQWMsS0FBSyxJQUFJO0FBR3ZELFNBQUssZ0JBQWdCLEtBQUssaUJBQWlCO0FBQzNDLFNBQUssY0FBYyxNQUFNLFVBQVU7QUFHbkMsU0FBSyxXQUFXO0FBQUEsTUFDZixJQUFJO0FBQUEsTUFDSixNQUFNO0FBQUEsTUFDTixVQUFVLE1BQU0sS0FBSyxjQUFjO0FBQUEsTUFDbkMsU0FBUyxDQUFDO0FBQUEsSUFDWCxDQUFDO0FBR0QsU0FBSyxjQUFjLElBQUksa0JBQWtCLEtBQUssS0FBSyxJQUFJLENBQUM7QUFHeEQsUUFBSSxLQUFLLFNBQVMsVUFB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
